# Week2 Day4 (18.12.20)

```python
a.split(";")
# 문자열을 분리해서 리스트로 만들어 줌
```

```python
map(변환하고자 하는 자료형, 변환하려는 리스트)
# 리스트의 자료형을 변경
```

##### 손풀기 예제

```python
#문제 1.
#문자열을 입력받아 문자열의 첫 글자와 마지막 글자를 출력하는 프로그램을 작성하시오.

str = input('문자를 입력하세요: ')
# 내 풀이
print(f"{str[0]}{str[len(str)-1]}")
# 강사님 풀이
print(f"{str[0]}{str[-1]}")


#문제 2.
#자연수 N이 주어졌을 때, 1부터 N까지 한 줄에 하나씩 출력하는 프로그램을 작성하시오.

n = int(input('숫자를 입력하세요: '))

for num in range(n):
    print(num+1)


#문제 3.
#숫자를 입력 받아 짝수/홀수를 구분하는 코드를 작성하시오.

number = int(input('숫자를 입력하세요: '))

if number % 2 == 0:
    print("짝수 입니다.")
else:
    print("홀수 입니다.")
# 1이나 0이라면 True나 False이므로 다음과 같이 가능
if number % 2:
    print("홀수 입니다.")
else:
    print("짝수 입니다.")

# 문제 4.
# 표준 입력으로 국어, 영어, 수학, 과학 점수가 입력됩니다.
# 국어는 90점 이상,
# 영어는 80점 초과,
# 수학은 85점 초과, 
# 과학은 80점 이상일 때 합격이라고 정했습니다.(한 과목이라도 조건에 만족하지 않으면 불합격)
# 다음 코드를 완성하여 합격이면 True, 불합격이면 False가 출력되도록 작성하시오. 

a = int(input('국어: '))
b = int(input('영어: '))
c = int(input('수학: '))
d = int(input('과학: '))

if (a >= 90) & (b > 80) & (c > 85) & (d >=80):
    print("퇴근하세요")
else:
    print("야근하세요")

# 문제 5.
# 표준 입력으로 물품 가격 여러 개가 문자열 한 줄로 입력되고, 각 가격은 ;(세미콜론)으로 구분되어 있습니다.
# 입력된 가격을 높은 가격순으로 출력하는 프로그램을 만드세요.
# 입력 예시: 300000;20000;10000

prices = input('물품 가격을 입력하세요: ')
price=prices.split(";")
# num_price=map(int, price) 으로하면 간단하게 됨.
num_price=[]

for x in price:
    num_price.append(int(x))

sorted_price=sorted(num_price)
sorted_price.reverse()
print(sorted_price)
```



##### 예제 (로또 몇번만에 당첨될까?)

```python
# 1. https://dhlottery.co.kr/common.do?method=getLottoNumber&drwNo=837
# 위의 주소로 요청을 보낸다.
import requests
import random
#camelcase w #snakecase _

url = "https://dhlottery.co.kr/common.do?method=getLottoNumber&drwNo=837"
response = requests.get(url).json() # 바로 변환 가능

# 2. 응답된 결과를 json으로 바꿔서 dictionary처럼 활용한다.

win_nums=[]
for x in range(6):
    win_nums.append(response[f"drwtNo{x+1}"])

bonus_num = response["bnusNo"]
print(f"{win_nums}{bonus_num}")
# 3. 랜덤으로 로또 번호 하나를 추출한다.
# my_nums = random.sample(range(1,46),6)

# 4. 몇 등인지 알아본다.
'''
cnt=0
bns=0
for win_num in win_nums:
    for my_num in my_nums:
        if win_num == my_num:
            cnt += 1
        if bonus_num == my_num:
            bns = 1
print(cnt)
print(bns)

# 5. 등수를 출력한다. 
if bns == 1 and cnt == 5:
    print("2등 입니다.")
elif cnt == 6:
    print("1등 입니다.")
else:
    print(f"{5-cnt+3}등 입니다.")
'''
'''
# 6. 반복
try_count = 0
win_count = 0
while(win_count == 0):
    my_nums = random.sample(range(1,46),6)
    cnt=0
    bns=0
    try_count += 1
    for win_num in win_nums:
        for my_num in my_nums:
            if win_num == my_num:
                cnt += 1
            if bonus_num == my_num:
                bns = 1
    if cnt == 6:
        win_count = 1
    print(try_count, end='\r')
print(f"{try_count}번 만에 당첨!")     
'''
# 강사님 풀이
lucky = [0, 0, 0, 0, 0]
money = 0
for i in range(10000000):
    my_nums = random.sample(range(1,46),6)
    matched = len(set(win_nums) & set(my_nums))

    if matched == 6:
        lucky[0] += 1
        print(i)
        print(3100000000*lucky[0] + 
                 6000000*lucky[1] + 
                 1500000*lucky[2] + 
                   50000*lucky[3] + 
                    5000*lucky[4])
        break
    elif matched == 5 and bonus_num in my_nums:
        lucky[1] += 1
    elif matched == 5:
        lucky[2] += 1
    elif matched == 4:
        lucky[3] += 1
    elif matched == 3:
        lucky[4] += 1
    print(lucky, i, end='\r')
```

#### 집합(set 연산)

set이라는 자료형이 있다. list를 set으로 형변환 할 수 있다.

set은 중복된 값을 제거한다.

```python
a = {1,2,2}
set(a)
=> {1,2}
```

교집합(&), 차집합(-), 합집합(|)

```python
테스트 코드 입력
```



#### API

영진위API - 일별 박스오피스 API 서비스

url에서의 요청변수를 알 수 있다.

키를 발급받아서

코드 작성

data가 적을땐 json이 편하지만 많으면 xml이 편함.

대신 pip install lxml 해야함.

예제 영화사이트에서 자료 요청하기

```python
# 0. 요청 url 만들기
from bs4 import BeautifulSoup
import requests
import webbrowser

key = "65e5c676c234b6109c6ce01a28f881e9"
base_url = "http://www.kobis.or.kr/kobisopenapi/webservice/rest/boxoffice/searchDailyBoxOfficeList.xml"
date = "20181210"

url = f"{base_url}?key={key}&targetDt={date}"
response = requests.get(url)

# 1. 요청 
soup = BeautifulSoup(response.text, 'lxml')
movie = soup.select('movienm')
print(movie)

##!!!!하다말음 좀 더 해야함	
webbrowser.open(url)
```

#### FLASK 활용 CLOUD9

1. flask Cloud9  가입

2. 버전을 바꿔야함 https://github.com/pyenv/pyenv에 들어가서 하라는대로 한다.
3. 4번까지 명령어 입력하고  터미널창을 닫았다가 연다
4. pyenv install 3.6.7 입력
5. 설치 완료되면 pyenv global 3.6.7으로 활성
6. 그냥 터미널과 vscode처럼 사용가능

##### 예제

```python
from flask import Flask
app = Flask(__name__)

@app.route("/")
def hello():
    return "wow!"
    
# flask run --host=0.0.0.0 --port=8080
```

running on 뒤의 주소를 눌러서 접근 가능

##### 홈페이지 예제

```python
app.py
```

```html
html들
```

### #선생님과 함꼐

1. #### 사용자로부터 정보 받기

   사용자로부터 정보를 받기 위해서 HTML의 form태그를 활용한다.

   실제로, 네이버/구글 등 모든 사이트에서 사용자(클라이언트)가 제출하는 내용들은 모두 <form> 태그 안에 있다.

   ##### 1.<form>보여주는 페이지(메뉴등록페이지)

   ```python
   #app.py
   @app.route("/menu/add")
   def menu_add():
       return render_template("menu_add.html")
   ```

   ```html
   <form action="/menu/create">
       메뉴를 입력하세요 : <input type="text" name="menu">
       <input type="submit">    
   </form>
   <!-- action과 name은 빼먹으면 안된다 -->
   ```

   * form태그 작성시 반드시 중요한 것들!!
     * 입력받을 input태그
     * 변수명 : input태그의 name
     * 정보를 받아서 처리할 경로:form태그의 action

   2. ##### 정보를 받아서 처리할 라우팅(txt파일에 저장)

      ```python
      # "/menu/create"는 form 태그에서 action에 정의한 url
      from flask import request #단수형
      @app.route("/menu/create")
      def menu_create():
          # "menu"는 input 태그에서 name에 정의한 이름
          menu = request.arg.get("menu")
          with open("menu.txt", "a") as file:
              file.write(menu)
          return f"{menu}가 등록되었습니다."
      ```
