# Week2 Day3 (18.12.19)

#### 1. Dictionary

* key와 value가 짝지어져 있는 형태

* key에는 list나 dictionary형태 빼고 다된다.

```python
phonebook = {
    "중국집":"561221",
    "초밥집":"123",
    "한식집":"118"
}
# 다른 형식으로도 표현 가능
phonebook2 = dict(중국집=1, 초밥집=2)

print(phonebook)
print(phonebook2)

# 변수 추가
phonebook["분식집"]="123124"
```

* dictionary 안에 dictionary도 가능

```python
idol = {
    "소녀시대" : dict(윤아 = 29, 태연 = 30, 제시카 = 28),
    "샤이니" : dict(태민 = 28, 키 = 29, 철수 = 30)
}
# 혹은
idol2 = {
    "소녀시대" : {
        "윤아" : 29,
        "태연" : 30,
        "제시카" : 28
    },
    "샤이니" : {
        "태민" : 28,
        "키" : 29,
        "철수" : 30
    }
}
```

* for 문에 넣어서 출력하면 key 만 출력된다

```python
for what in phonebook:
    print(what)
```

​	key가 있으면 value도 출력가능하지만

​	value만 있으면 key를 출력할 수 없기 때문이다.

```python
for what in phonebook:
    print(what)
    print(phonebook[what])
```

​	으로 하면 둘다 출력 가능

* 한 줄에 출력을 하고 싶다면

```python
for what in phonebook:
    print(what, end=' ')
    print(phonebook[key])
```

​	마지막 문자를 띄어쓰기로 바꿔주면 엔터가 출력되지 않는다. 혹은

```python
for key, value in phonebook.items():
    print(key, value)
```

​	이것만 알고 있어도 활용이 가능

* key나 value만 출력하고 싶다면

```python
for key in phonebook.keys():
    print(key)
```

```python
for value in phonebook.values():
    print(value)
```



#### Dictionary 예제

```python
"""
파이썬 dictionary 활용 기초!
"""
# 1. 평균을 구하세요.
iu_score = {
    "수학": 80,
    "국어": 90,
    "음악": 100
}

# 답
print("=====Q1=====")
'''내코드
for x in iu_score.values():
    sum = sum + x
avg = sum/len(iu_score)
print(avg)
'''
avg = sum(iu_score.values())/len(iu_score)
print(avg)

# 2. 반 평균을 구하세요.
score = {
    "iu": {
        "수학": 80,
        "국어": 90,
        "음악": 100
    },
    "ui": {
        "수학": 80,
        "국어": 90,
        "음악": 100
    }
}
# 답
print("=====Q2=====")
# 내 풀이
for key in score:
    total_score = 0
    for value in score[key].values():
        total_score += value
    avg = total_score/len(score[key])
    print(f"{key}의 평균 {avg}")
# 강사님 풀이
total_score = 0
length = 0
for person_score in score.values():
    for inidividual_score in person_score.values():
        total_score += inidividual_score
        length +=1
average_score = total_score / length
print(average_score)

# 3. 도시별 최근 3일의 온도 평균은?
"""
출력 예시)
서울 : 값
대전 : 값
광주 : 값
부산 : 값
"""
# 3-1. 도시 중에 최근 3일 중에 가장 추웠던 곳, 가장 더웠던 곳은?
city = {
    "서울": [-6, -10, 5],
    "대전": [-3, -5, 2],
    "광주": [0, -2, 10],
    "부산": [2, -2, 9]
}

# 답변 코드는 아래에 작성해주세요.
print("=====Q3=====")
for key in city:
    total_score = 0
    avg = 0
    for value in city[key]:
        total_score += value
    avg = total_score/len(city[key])
    print(f"{key}의 평균 {avg:0.2f}")
# 강사님 코드
for name, temp in city.items():
    # 첫번째 시행때
    # name = "서울"
    # temp = [-6, -10, 5]
    average_temp = sum(temp)/len(temp)
    print(f"{name} : {average_temp}")
# 답변 코드는 아래에 작성해주세요.
print("=====Q3-1=====")
min = 99
max = -99
min_city = ""
max_city = ""
for key in city:
    total_score = 0
    avg = 0
    for value in city[key]:
        total_score = total_score + value
    avg = total_score/len(city[key])
    if avg < min:
        min = avg
        min_city=key
    elif avg > max:
        max = avg
        max_city=key
print(f"가장 추운 곳 {min_city} : {min:0.2f}")
print(f"가장 더운 곳 {max_city} : {max:0.2f}")

min = 99
max = -99
min_city = ""
max_city = ""
for key in city:
    total_score = 0
    avg = 0
    for value in city[key]:
        if value < min:
            min = value
            min_city=key
        elif value > max:
            max = value
            max_city=key
print(f"가장 추운 곳 {min_city} : {min}")
print(f"가장 더운 곳 {max_city} : {max}")

'''위에랑 충돌남
# 강사님 풀이
city = {
    "서울": [-6, -10, 5],
    "대전": [-3, -5, 2],
    "광주": [0, -2, 10],
    "부산": [2, -2, 9]
}

cold = 0
hot = 0
cnt = 0
hot_city = ""
cold_city = ""
for name, temp in city.items():
    # 첫 번째 시행 때,
    # name = "서울"
    # temp = [-6, -10, 5]
    if cnt == 0:
        hot = max(temp)
        cold = min(temp)
        hot_city = name
        cold_city = name
    else:
        # 최저 온도가 cold보다 더 추우면, cold에 넣고
        if min(temp) < cold:
            cold = min(temp)
            cold_city = name
        elif max(temp) > hot:
            hot = max(temp)
            hot_city = name
    cnt += 1
print(hot_city)
print(cold_city)
        # 최고 온도가 hot보다 더 더우면, hot에 넣는다.
'''

# 4. 위에서 서울은 영상 2도였던 적이 있나요?
# 답변 코드는 아래에 작성해주세요.
print("=====Q4=====")
if 2 in city["서울"]:
    print("네")
else:
    print("아니영")

count = len(city["서울"])
correct = 0
for i in range(count):
    if city["서울"][i] == 2:
        correct = 1
if correct == 1:
    print("네 있습니다.")
else:
    print("아뇨 없습니다.")
    
```

* 이 요소가 리스트 안에 있니?

```python
a = [1,2,3]
4 in a
False
3 in a
True

b = "asdf"
"f" in b
True
"z" in b
False
```

```python
len(dic) # dictionary의 갯수
```

```python
dir(score.values()) # 사용가능한 함수 목록
```

```python
min(a)
max(b)
#리스트의 최대, 최소 구하기
```



### 2. 텔레그램

##### 1) 스티커 생성

* `Stickers`봇 에서 명령어를 입력해 스티커 생성 가능

##### 2) 메세지 보내기 

@botFather-start-/new bot- 명령어대로 진행

vs code에서 telegram.py 만들기

telegram홈페이지의 example 실행

```python
# !!!!!!!!!토큰은 비밀번호와 같다!!!!!!!!
token = "비밀"

url = f"https://api.telegram.org/bot{token}/getMe"
print(url)
```

터미널에서 실행 후 결과 주소 인터넷 창에 입력하면

![캡처](C:\Users\student\Desktop\TIL\pic\1.PNG)

딕셔너리 형태로 나옴. 

편하게 보기 위해 크롬 웹 스토어에서 JSON Viewer 설치

* 참고 momuntum 설치

다시 봇에 가서 아무말이나 치고

주소 마지막 getMe를 getUpdates를 치면

아무말 친거에 대해 화면이 바뀌어 있음.

userid는 중요함. id 찾을때 제대로된 id를 찾도록 주의! 어떤 id인지 잘 보기!

JSON형태면 BeautifulSoup을 안써도됌



##### 환경변수 관리

token 복사

vi ~/.bash_profile

export TELEGRAM_TOKEN='token'

esc -> :wq

* shift+insert : 복사



이후 import os 로 환경변수를 가져옴



##### 챗봇활용

```python
import requests
import os
# !!!!!!!!!토큰은 비밀번호와 같다!!!!!!!!
token = os.getenv("TELEGRAM_TOKEN")
url = f"https://api.telegram.org/bot{token}/getUpdates"

# 1. 요청을 보낸 결과를 response 저장을 한다.
print(url)
response = requests.get(url)

# 2. json 형식으로 바꾼다.
# 지금은 dictionary의 list가 섞여있는 것과 같다고 생각하자.
updates = response.json()
print(updates)

# 3. user의 id를 찾는다.
user_id=updates["result"][0]["message"]["from"]["id"]
print(user_id)
# 리스트와 딕셔너리가 혼합되어 있어 접근 방법에 대해 생각해 봐야함.

# 4. 메시지를 설정한다.
msg = "안녕안녕?"
url = f"https://api.telegram.org/bot{token}/sendMessage?text={msg}&chat_id={user_id}"

# 5. 메시지를 보낸다.
requests.get(url)

```

##### IFTTT

IoT활용 관련 사이트 아주 유명.